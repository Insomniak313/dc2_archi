<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>

<div id="test"></div>

<script
  src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
  integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs="
  crossorigin="anonymous"></script>

  <script type="text/javascript">

  	var taille = 8;
  	var tableau = [];
  	var estNoir = false;

  	for(var ligne = 0; ligne < taille ; ligne++) {
  		tableau[ligne] = [];
		for(var colonne = 0; colonne < taille ; colonne++) {
	  		tableau[ligne][colonne] = {};
	  		if(estNoir) {
	  			tableau[ligne][colonne].couleur = 'black'
	  		} else {
	  			tableau[ligne][colonne].couleur = 'white';
	  		}
	  		estNoir = !estNoir;
	  	}  		
	  	estNoir = !estNoir;
  	}





  	for(var ligne = 0; ligne < tableau.length ; ligne++) {

  		for(var colonne = 0; colonne < tableau[ligne].length; colonne++) {

  			var cpt = 0;

  			// Est-ce que la ligne 2 cran au dessus existe
			if(typeof tableau[ligne-2] !== 'undefined') {
				// Est-ce que la cellule 2 ligne au dessus et 1 colonne a droite existe
	  			if(typeof tableau[ligne-2][colonne + 1] !== 'undefined') {
	  				cpt = cpt +1;
	  			}

				// Est-ce que la cellule 2 ligne au dessus et 1 colonne a gauche existe
	  			if(typeof tableau[ligne-2][colonne - 1] !== 'undefined') {
	  				cpt = cpt +1;
	  			}
	  		}
	  		// Est-ce que la ligne 1 cran au dessus existe
			if(typeof tableau[ligne-1] !== 'undefined') {
				// Est-ce que la cellule 1 ligne au dessus et 2 colonnes a droite existe
	  			if(typeof tableau[ligne-1][colonne + 2] !== 'undefined') {
	  				cpt = cpt +1;
	  			}

				// Est-ce que la cellule 1 ligne au dessus et 2 colonne a gauche existe
	  			if(typeof tableau[ligne-1][colonne - 2] !== 'undefined') {
	  				cpt = cpt +1;
	  			}
	  		}
	  		// Est-ce que la ligne 2 cran au dessous existe
			if(typeof tableau[ligne+2] !== 'undefined') {
				// Est-ce que la cellule 2 ligne au dessous et 1 colonne a droite existe
	  			if(typeof tableau[ligne+2][colonne + 1] !== 'undefined') {
	  				cpt = cpt +1;
	  			}

				// Est-ce que la cellule 2 ligne au dessous et 1 colonne a gauche existe
	  			if(typeof tableau[ligne+2][colonne - 1] !== 'undefined') {
	  				cpt = cpt +1;
	  			}
	  		}
	  		// Est-ce que la ligne 1 cran au dessous existe
			if(typeof tableau[ligne+1] !== 'undefined') {
				// Est-ce que la cellule 1 ligne au dessous et 2 colonnes a droite existe
	  			if(typeof tableau[ligne+1][colonne + 2] !== 'undefined') {
	  				cpt = cpt +1;
	  			}

				// Est-ce que la cellule 1 ligne au dessous et 2 colonne a gauche existe
	  			if(typeof tableau[ligne+1][colonne - 2] !== 'undefined') {
	  				cpt = cpt +1;
	  			}
	  		}

	  		tableau[ligne][colonne].compte = cpt;


  		}
  	}



  	function tableauEnHtml(tab) {
  		var retour = '<table>';

  		for(var i=0; i < tab.length; i++) {
  			retour = retour + '<tr>';
  			for(var j=0; j<tab[i].length ; j++) {
				retour = retour + '<td class="' + tab[i][j].couleur + '">';
				retour = retour + tab[i][j].compte;
				retour = retour + '</td>';
  			}
  			retour = retour + '</tr>';
  		}

  		retour = retour + '</table>';
  		return retour;
  	}


  	var toto = tableauEnHtml(tableau);

  	$('#test').html(toto);

  	console.log(tableau);
  	

  </script>
</body>
</html>