<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
	<style type="text/css">
		table {
			margin: auto;
			margin-top: 50px;
		}
		td{
			border:1px solid black;
			margin: 0;
			width: 20px;
			height: 20px;
		}
	</style>
	<div id="conteneur_demineur"></div>
	<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
  	<script>

  		var nbLignes = 10;
  		var nbColonnes = 15;

  		var nbDeMinesAPlacer = 10;
  		var tableauDeMines = [];

  		var html_demineur = '<table>';
  		for(var i = 0; i < nbLignes ; i = i +1 ) {
  			tableauDeMines[i] = [];
  			html_demineur = html_demineur + '<tr>';
  			for(var j = 0; j < nbColonnes; j++) {
  				var rand = Math.random();
  				var estMine = false;

  				if(rand < 0.5 && nbDeMinesAPlacer > 0) {
  					estMine = true;
  					nbDeMinesAPlacer = nbDeMinesAPlacer - 1;
  				}

  				tableauDeMines[i][j] = estMine;

  				html_demineur = html_demineur + '<td>';

  				if(estMine) {
  					html_demineur = html_demineur + 'X';
  				}
  				html_demineur = html_demineur + '</td>';
  			}
  			html_demineur = html_demineur + '</tr>';
  		}
  		html_demineur = html_demineur + '</table>';

  		console.log(tableauDeMines);

  		for(var i = 0; i < tableauDeMines.length; i++) {
	  		for(var j = 0; j < tableauDeMines[i].length; j++) {
	  			if(tableauDeMines[i][j] == false) {
	  				var cpt = 0;
	  				// Cellule à droite
	  				if(typeof tableauDeMines[i][j+1] != 'undefined' && tableauDeMines[i][j+1] ===true) {
	  					cpt = cpt +1;
	  				}
	  				// Cellule à gauche
	  				if(typeof tableauDeMines[i][j-1] != 'undefined' && tableauDeMines[i][j-1] === true) {
	  					cpt = cpt +1;
	  				}
	  				// Est-ce que la ligne au dessus existe
	  				if(typeof tableauDeMines[i+1] != 'undefined') {
		  				// Cellule au dessus
	  					if(tableauDeMines[i+1][j] === true) {
		  					cpt = cpt +1;
		  				}	
		  				// Cellule en haut à gauche
		  				if(typeof tableauDeMines[i + 1][j - 1] != 'undefined' && tableauDeMines[i + 1][j - 1] ===true) {
		  					cpt = cpt +1;
		  				}
		  				// Cellule en haut à droite
		  				if(typeof tableauDeMines[i + 1][j + 1] != 'undefined' && tableauDeMines[i + 1][j + 1] ===true) {
		  					cpt = cpt +1;
		  				}
	  				} 
	  				// Est-ce que la ligne en dessous existe
	  				if(typeof tableauDeMines[i-1] != 'undefined') {
	  					// Cellule en dessous
	  					if(tableauDeMines[i-1][j] ===true) {
		  					cpt = cpt +1;
		  				}
						// Cellule en bas à gauche
		  				if(typeof tableauDeMines[i - 1][j - 1] != 'undefined' && tableauDeMines[i - 1][j - 1] === true) {
		  					cpt = cpt +1;
		  				}
		  				// Cellule en bas à droite
		  				if(typeof tableauDeMines[i - 1][j + 1] != 'undefined' && tableauDeMines[i - 1][j + 1] === true) {
		  					cpt = cpt +1;
		  				}
	  				} 


	  

	  				tableauDeMines[i][j] = cpt;

	  			}
	  		}	
  		}

  		  		console.log(tableauDeMines);

  		$('#conteneur_demineur').html(html_demineur);
  		// var nbDeMines = 10;

  		// $('td').each(function(index) {
  		// 	var rand = Math.random();
  		// 	if(rand < 0.5 && nbDeMines > 0) {
  		// 		$(this).html('X');
  		// 		nbDeMines = nbDeMines - 1;	
  		// 	}
  			
  		// });
  	</script>
</body>
</html>